#include "stdafx.h"

#include "System/Components/Drawing/DrawObject.h"

#include "System/Managers/DrawManager.h"

////////////////////////////////////////////////////////////////////////////////
DrawObject::DrawObject()
{
}

////////////////////////////////////////////////////////////////////////////////
DrawObject::~DrawObject()
{
}

////////////////////////////////////////////////////////////////////////////////
const DrawParameters& DrawObject::GetDrawParameters() const
{
	return m_DrawParameters;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::Reset()
{
	m_DrawParameters.Reset();
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::Draw() const
{
	DrawManager::Instance().DrawTexture(m_DrawParameters);
}

// Getters

////////////////////////////////////////////////////////////////////////////////
Point DrawObject::GetPos() const
{
	return { m_DrawParameters.PosRect.x, m_DrawParameters.PosRect.y };
}

////////////////////////////////////////////////////////////////////////////////
int32_t DrawObject::GetWidth() const
{
	return m_DrawParameters.PosRect.w;
}

////////////////////////////////////////////////////////////////////////////////
int32_t DrawObject::GetHeight() const
{
	return m_DrawParameters.PosRect.h;
}

////////////////////////////////////////////////////////////////////////////////
Rectangle DrawObject::GetPosRect() const
{
	return m_DrawParameters.PosRect;
}

////////////////////////////////////////////////////////////////////////////////
Rectangle DrawObject::GetFrameRect() const
{
	return m_DrawParameters.FrameRect;
}

////////////////////////////////////////////////////////////////////////////////
int32_t DrawObject::GetOpacity() const
{
	return m_DrawParameters.Opacity;
}

////////////////////////////////////////////////////////////////////////////////
int32_t DrawObject::GetRotationAngle() const
{
	return m_DrawParameters.RotationAngle;
}

////////////////////////////////////////////////////////////////////////////////
Point DrawObject::GetRotationCenter() const
{
	return m_DrawParameters.RotationCenter;
}

////////////////////////////////////////////////////////////////////////////////
EObjectType DrawObject::GetType()
{
	return m_DrawParameters.ObjectType;
}

////////////////////////////////////////////////////////////////////////////////
EBlendMode DrawObject::GetBlendMode()
{
	return m_DrawParameters.BlendMode;
}

////////////////////////////////////////////////////////////////////////////////
EFlipMode DrawObject::GetFlipMode()
{
	return m_DrawParameters.FlipMode;
}

////////////////////////////////////////////////////////////////////////////////
bool DrawObject::IsVisible() const
{
	return m_DrawParameters.IsVisible;
}

// Setters

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetPos(int32_t x, int32_t y)
{
	m_DrawParameters.PosRect.x = x;
	m_DrawParameters.PosRect.y = y;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetPos(const Point& pos)
{
	m_DrawParameters.PosRect.x = pos.x;
	m_DrawParameters.PosRect.y = pos.y;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetWidth(int32_t width)
{
	m_DrawParameters.PosRect.w = width;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetHeight(int32_t height)
{
	m_DrawParameters.PosRect.h = height;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetFrameRect(Rectangle rect)
{
	m_DrawParameters.FrameRect = rect;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetOpacity(int32_t opacity)
{
	m_DrawParameters.Opacity = opacity;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetRotationAngle(int32_t rotationAngle)
{
	m_DrawParameters.RotationAngle = rotationAngle;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetRotationCenter(Point rotationCenter)
{
	m_DrawParameters.RotationCenter = rotationCenter;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetType(EObjectType type)
{
	m_DrawParameters.ObjectType = type;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetBlendMode(EBlendMode mode)
{
	m_DrawParameters.BlendMode = mode;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetFlipMode(EFlipMode mode)
{
	m_DrawParameters.FlipMode = mode;
}

void DrawObject::SetIsVisible(bool visible)
{
	m_DrawParameters.IsVisible = visible;
}

// Others

////////////////////////////////////////////////////////////////////////////////
void DrawObject::MoveUp(int32_t delta)
{
	m_DrawParameters.PosRect.y -= delta;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::MoveDown(int32_t delta)
{
	m_DrawParameters.PosRect.y += delta;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::MoveLeft(int32_t delta)
{
	m_DrawParameters.PosRect.x -= delta;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::MoveRight(int32_t delta)
{
	m_DrawParameters.PosRect.x += delta;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::ChangeWidthBy(int32_t delta)
{
	m_DrawParameters.PosRect.w += delta;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::ChangeHeightBy(int32_t delta)
{
	m_DrawParameters.PosRect.h += delta;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::Resize(int32_t width, int32_t height)
{
	m_DrawParameters.PosRect.w = width;
	m_DrawParameters.PosRect.h = height;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::Resize(int32_t percentage)
{
	m_DrawParameters.PosRect.w = m_DrawParameters.PosRect.w * percentage / 100;
	m_DrawParameters.PosRect.h = m_DrawParameters.PosRect.h * percentage / 100;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::ChangeOpacityBy(int32_t delta)
{
	m_DrawParameters.Opacity += delta;
	if (m_DrawParameters.Opacity >= Constants::FullOpacity)
	{
		m_DrawParameters.Opacity = Constants::FullOpacity;
	}
	else if (m_DrawParameters.Opacity <= Constants::ZeroOpacity)
	{
		m_DrawParameters.Opacity = Constants::ZeroOpacity;
	}
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetZeroOpacity()
{
	m_DrawParameters.Opacity = Constants::ZeroOpacity;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::SetMaxOpacity()
{
	m_DrawParameters.Opacity = Constants::FullOpacity;
}

////////////////////////////////////////////////////////////////////////////////
void DrawObject::Rotate(int32_t delta)
{
	m_DrawParameters.RotationAngle += delta;
}

////////////////////////////////////////////////////////////////////////////////
bool DrawObject::ContainsPoint(const Point& point) const
{
	const Rectangle& posRect = m_DrawParameters.PosRect;
	return Rectangle(posRect.x, posRect.y, posRect.w, posRect.h).IsPointInside(point);
}